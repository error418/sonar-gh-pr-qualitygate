# Swingletree HELM configuration

## ElasticSearch configuration (history not available if disabled)
elastic:
  enabled: false
  node: http://localhost:9200
  index: swingletree
  auth: # elastic nodejs auth object
    username:
    password:
    apiKey:

## Redis configuration
redis:
  password: # set your database password with this value

  # redis helm dependency configuration ---
  enabled: true # enables the redis helm dependency chart
  cluster:
    enabled: false
  fullnameOverride: swingletree-cache


## GitHub configuration
github:
  app:
    id: # The AppId of your GitHub app instance (not installation!)
    page: # the GitHub App public page. Will be referenced in the Swingletree landing page.
    keyfile: gh-app.pem # the key file of your GitHub App (you retrieve this from the App settings page)
  base: https://api.github.com # Github Api base url
  secret: # this is the webhook secret. You should set it.
  debug: false # runs octokit in debug mode. Use this only for debug, since this can reveal secret tokens in the logs!

## SonarQube configuration
sonar:
  base: # SonarQube base url
  token: # SonarQube Server API token

## Feature flags
features:
  dashboard: true # enable the deck dashboard
  yoke: https://github.com/error418/yoke/releases # yoke download url

## Swingletree core service configuration
### deck configuration
deck:
  path: # set this to the reverse proxy path, if deck is running behind a path in a reverse proxy

### gate configuration
gate:
  api:
    token: # authentication secret for gate plugin endpoints. Set this.

### scotty configuration
scotty: # not needed yet :)


## Plugin configuration
plugins:
  nebula:
    enabled: true
    context: gradle/nebula
  zap:
    enabled: true
    context: security/zap
  twistlock:
    enabled: true
    context: security/twistlock
  sonar:
    enabled: true
    context: sonarqube
  testng:
    enabled: true
    context: test/testng

# ingress configuration
ingress:
  enabled: true
  deck:
    path: /
    hosts:
      - swingletree.minikube
  gate:
    path: /
    hosts:
      - gate.swingletree.minikube

  annotations:
    # nginx.ingress.kubernetes.io/rewrite-target: /$2
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"

  tls: []


#######################################################################################
# Advanced section
#--------------------------------------------------------------------------------------

replicaCount: 1

# images to use for this deployment
images:
  deck:
    repo: deck/deck
    version: 1.3.0                 #deck_VERSION
  gate:
    repo: gate/gate
    version: 1.3.0                 #gate_VERSION
  scotty:
    repo: scotty/scotty
    version: 1.0.5                 #scotty_VERSION
  plugin-nebula:
    repo: plugin-nebula/plugin-nebula
    version: 1.1.2                 #plugin-nebula_VERSION
  plugin-sonarqube:
    repo: plugin-sonarqube/plugin-sonarqube
    version: 1.1.2                 #plugin-sonarqube_VERSION
  plugin-twistlock:
    repo: plugin-twistlock/plugin-twistlock
    version: 1.1.2                 #plugin-twistlock_VERSION
  plugin-zap:
    repo: plugin-zap/plugin-zap
    version: 1.1.2                 #plugin-zap_VERSION
  plugin-testng:
    repo: plugin-testng/plugin-testng
    version: 1.0.0                 #plugin-testng_VERSION
pullPolicy: IfNotPresent
registry: docker.pkg.github.com/swingletree-oss/
#imagePullSecret: regcred

# default service configuration
service:
  type: ClusterIP
  port: 3000

# github app key file content
github_app_key: # set using the bake.sh option --gh-keyfile

# log level of all swingletree pods
log:
  level: info

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #  cpu: 100m
  #  memory: 128Mi
  # requests:
  #  cpu: 100m
  #  memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}
